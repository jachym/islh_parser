<xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:fce="http://fce">
   > 
<xsl:param name="ODD"/>
<xsl:param name="DIL"/>
<xsl:param name="POR"/>
<xsl:param name="PSK"/>
<xsl:template match='LHC'>


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta content="text/html; charset=utf-8" />
<title>Hospodářská kniha</title>
<style>
h2{
  background-color: #DDD; 
  margin-bottom: 0px;
  margin-left: 2px;
  margin-right: 2px;
  margin-top: 5px;
  padding-left: 20px;
  padding-top: 8px;
  padding-bottom: 4px;
  font-family:Helvetica;
  font-size: 95%;
}

table {
   /*border-collapse: collapse;*/
   width: 100%;
   font-family:Helvetica;
   font-size:80%;
}

table.lhc {
   border-collapse: collapse;
   width:350px;
}

th, td {
    padding: 3px;
}
th {
    background-color: #AAA;
    color: white;
    vertical-align: top;
    text-align: center;
}
th.field-name{
   text-align: left;
   background-color: #343;
}

tfoot td{
    background-color: #AAA;
    color: white;
    font-weight: bold;
}

div.dreviny{
   margin-left:25px;
}

div.porostni-skupina{
   margin-left:15px;
}
div.porost{
   margin-left:15px;
}

div.etaz{
   margin-top:5px;
}

table.lhc td {
   padding-bottom:1px;
   padding-top:1px;
}

table.por th, td {
   vertical-align:top;
}

table.psk th, td {
   vertical-align:top;
}


/*tr:nth-child(even){background-color: #f2f2f2}*/
tr{background-color: #DDD}
</style>
</head>
<body>
   <div id="hospodarska-kniha">
      <table class="lhc">
	 <colgroup>
	    <col width="22%"/>
	    <col width="78%"/>
	 </colgroup>
	 <tbody>
	    <tr>
	       <th class="field-name">Kód LHC:</th>
	       <td class="field-body"><strong><xsl:value-of select='@LHC_KOD'/></strong></td>
	    </tr>
	    <tr>
	       <th class="field-name">LS(LZ):</th>
	       <td class="field-body"><strong><xsl:value-of select='@LHC_NAZ'/></strong></td>
	    </tr>
	    <tr>
	       <th class="field-name">Platnost:</th>
	       <td class="field-body"><strong><xsl:value-of select='@LHP_OD'/> - <xsl:value-of select='@LHP_DO'/></strong></td>
	    </tr>
	 </tbody>
      </table>
   </div>
   <xsl:apply-templates select="ODD[@ODD=$ODD]/DIL[@DIL=$DIL]/POR[@POR=$POR]"/>
</body>
</html>
</xsl:template>

<xsl:template match='POR'>
   <div class="porost">
      <table class="por">
	 <colgroup>
	    <col width="15%"/>
	    <col width="15%"/>
	    <col width="20%"/>
	    <col width="15%"/>
	    <col width="25%"/>
	 </colgroup>
	 <tbody>
	    <tr>
	       <td>Oddělení: <strong><xsl:value-of select='../../@ODD'/></strong></td>
	       <td>Dílec: <strong><xsl:value-of select='../@DIL'/></strong></td>
	       <td>plocha: <strong>${plocha_dil}</strong></td>
	       <td>Porost: <strong><xsl:value-of select='@POR'/></strong></td>
	       <td>plocha: <strong>${plocha_por}</strong></td>
	    </tr>
	    <tr>
	       <td colspan="3">Lesní oblast: <strong><xsl:value-of select='@LES_OBL'/> <xsl:value-of select="fce:lesni_oblast(@LES_OBL)"/>
	       </strong></td>
	       <td>OLH: <strong><xsl:value-of select='@OLH'/></strong></td>
	       <td>Pásmo ohrožení: <strong><xsl:value-of select = '@PAS_OHR'/></strong></td>
	    </tr>
	    <tr>
	       <td colspan="2">Majetek: <strong><xsl:value-of select='@MAJ_DRUH'/>/<xsl:value-of select='@MAJ_KOD'/></strong></td>
	       <td colspan="3">Zvl. statut: <strong><xsl:value-of select='@ZVL_STATUT'/></strong></td>
	    </tr>
	    <tr>
	       <td colspan="2">kategorie:<br/><xsl:apply-templates select='KAT'/></td>
	       <td colspan="3">Popis porostu:<br/><xsl:value-of select='@POR_TEXT'/></td>
	    </tr>
	 </tbody>
      </table>
   </div>
   <div class="porostni-skupina">
      <h2>Porostní skupina</h2>
      <table class="psk">
	 <colgroup>
	    <col width="20%" />
	    <col width="20%" />
	    <col width="20%" />
	    <col width="40%" />
	 </colgroup>
	 <tbody>
	    <tr>
	       <td>PSK: <strong>${PSK}</strong></td>
	       <td>Plocha: <strong>{PSK_P}</strong></td>
	       <td>Lesní typ: <strong>${LT}</strong></td>
	       <td>Lesní úřad: <strong>${lesni_urad}</strong></td>
	    </tr>
	    <tr>
	       <td colspan="2">KU: <strong>${kod_ku}/${katastr_uzemi}</strong></td>
	       <td colspan="2">Lesní vegetační stupeň: <strong>${LVS}</strong></td>
	    </tr>
	    <tr>
	       <td colspan="4">Popis psk: ${PSK_TEXT}</td>
	    </tr>
	 </tbody>
      </table>
      <div class="etaz">
	 <table class="etaz">
	    <colgroup>
	       <col width="9%" />
	       <col width="16%" />
	       <col width="14%" />
	       <col width="19%" />
	       <col width="23%" />
	       <col width="19%" />
	    </colgroup>
	    <tbody>
	       <tr>
		  <td>Etáž:<br/><strong>${ETZ}</strong></td>
		  <td>Skut. plocha:<br/><strong>${plocha_etz}</strong></td>
		  <td>Kód majetku:<br/><strong>${MAJ_KOD}</strong></td>
		  <td>Model. těž. %:<br/><strong>${model_tez_proc}</strong></td>
		  <td>Obmýtí/Obnov.doba:<br/><strong>${obmyti}/${obn_doba}</strong></td>
		  <td>% mel. a zpevn. drev.:<br/><strong>{proc_mel}</strong></td>
	       </tr>
	    </tbody>
	 </table>
	 <div class="dreviny" style="overflow-x:auto;">
	    <table class="dreviny">
	       <colgroup>
		  <col width="4%" />
		  <col width="2%" />
		  <col width="4%" />
		  <col width="3%" />
		  <col width="4%" />
		  <col width="4%" />
		  <col width="2%" />
		  <col width="4%" />
		  <col width="4%" />
		  <col width="4%" />
		  <col width="4%" />
		  <col width="2%" />
		  <col width="1%" />
		  <col width="2%" />
		  <col width="2%" />
		  <col width="3%" />
		  <col width="3%" />
		  <col width="4%" />
		  <col width="4%" />
		  <col width="4%" />
		  <col width="3%" />
		  <col width="4%" />
		  <col width="3%" />
		  <col width="4%" />
		  <col width="4%" />
		  <col width="4%" />
		  <col width="3%" />
		  <col width="2%" />
		  <col width="5%" />
		  <col width="4%" />
	       </colgroup>
	       <thead>
		  <tr>
		     <th rowspan="2">Hospodářský<br/>soubor</th>
		     <th rowspan="2">Věk</th>
		     <th rowspan="2">Zakmenění</th>
		     <th rowspan="2">Dřevina</th>
		     <th rowspan="2">Zastoupení<br/>%</th>
		     <th rowspan="2">Výpočetní<br/>tlouštka<br/>cm</th>
		     <th rowspan="2">Výška<br/>m</th>
		     <th rowspan="2">Objem<br/>středního<br/>kmene</th>
		     <th rowspan="2">Bonita<br/>absolutní</th>
		     <th rowspan="2">Bonita<br/>relativní</th>
		     <th rowspan="2">Genetická<br/>klasifikace</th>
		     <th colspan="2">Poškození</th>
		     <th rowspan="2">Imise</th>
		     <th rowspan="2">%<br/>Souší</th>
		     <th colspan="2">Zásoba<br/>v m<sup>3</sup> b.k.</th>
		     <th colspan="4">Těžba výchovná</th>
		     <th colspan="2">Těžbai<br/>obnovní</th>
		     <th colspan="3">Prořezávky</th>
		     <th colspan="4">Zalesnění</th>
		  </tr>
		  <tr>
		     <th>Druh</th>
		     <th>%</th>
		     <th>na<br/>1 ha</th>
		     <th>celkem</th>
		     <th>naléhavost</th>
		     <th>násobnost</th>
		     <th>plocha<br/>ha</th>
		     <th>objem<br/>m<sup>3</sup></th>
		     <th>plocha<br/>ha</th>
		     <th>objem<br/>m<sup>3</sup></th>
		     <th>naléhavost</th>
		     <th>násobnost</th>
		     <th>plocha<br/>ha</th>
		     <th>Dřevina</th>
		     <th>Druh</th>
		     <th>Zastoupení<br/>%</th>
		     <th>Plocha<br/>ha</th>
		  </tr>
	       </thead>
	       <tbody>
		  <tr>
		     <td>${HS}</td>
		     <td>${}</td>
		     <td>${ZAKM}</td>
		     <td>${DRV}</td>
		     <td>${ZAST}</td>
		     <td>${TL}</td>
		     <td>${H}</td>
		     <td>${V}</td>
		     <td>${BA}</td>
		     <td>${BR}</td>
		     <td>${GEN}</td>
		     <td>${D}</td>
		     <td>$</td>
		     <td>${IM}</td>
		     <td>${S}</td>
		     <td>${Z}</td>
		     <td>${C}</td>
		     <td>${NAL}</td>
		     <td>${NAS}</td>
		     <td>${PL}</td>
		     <td>${OB}</td>
		     <td>${PL}</td>
		     <td>${OB}</td>
		     <td>${NAL}</td>
		     <td>${NAS}</td>
		     <td>${PLCH}</td>
		     <td>${DRV}</td>
		     <td>${D}</td>
		     <td>${ZAST}</td>
		     <td>${PLCH}</td>
		  </tr>
	       </tbody>
	       <tfoot>
		  <tr>
		     <td colspan="4">Etáž celkem</td>
		     <td>${sZAST}</td>
		     <td colspan="10"></td>
		     <td>$sum</td>
		     <td>$sum</td>
		     <td colspan="2"></td>
		     <td>$sum</td>
		     <td>$sum</td>
		     <td>$sum</td>
		     <td>$sum</td>
		     <td colspan="2"></td>
		     <td>$sum</td>
		     <td colspan="2"></td>
		     <td>$sum</td>
		     <td>$sum</td>
		  </tr>
		  <tr>
		     <td colspan="4">Porostní skupina celkem</td>
		     <td>${sZAST}</td>
		     <td colspan="10"></td>
		     <td>$sum</td>
		     <td>$sum</td>
		     <td colspan="2"></td>
		     <td>$sum</td>
		     <td>$sum</td>
		     <td>$sum</td>
		     <td>$sum</td>
		     <td colspan="2"></td>
		     <td>$sum</td>
		     <td colspan="2"></td>
		     <td>$sum</td>
		     <td>$sum</td>
		  </tr>
	       </tfoot>
	    </table>
	 </div>
      </div>
   </div>
</xsl:template>
<xsl:template match='KAT'>
   <xsl:value-of select='@KATEGORIE'/> - 
   <xsl:choose>
      <xsl:when test="@KATEGORIE = '10'">lesy, které nejsou zařazeny v kategorii lesů ochranných nebo lesů zvláštního určení</xsl:when>
      <xsl:when test="@KATEGORIE = '21a'">lesy na mimořádně nepříznivých stanovištích</xsl:when>
      <xsl:when test="@KATEGORIE = '21b'">vysokohorské lesy pod hranicí stromové vegetace chránící níže položené lesy a lesy na exponovaných hřebenech</xsl:when>
      <xsl:when test="@KATEGORIE = '21c'">lesy v klečovém lesním vegetačním stupni</xsl:when>
      <xsl:when test="@KATEGORIE = '31a'">lesy v pásmu hygienické ochrany vodních zdrojů I.stupně</xsl:when>
      <xsl:when test="@KATEGORIE = '31b'">lesy v ochranném pásmu zdrojů přírodních léčivých a stolních minerálních vod</xsl:when>
      <xsl:when test="@KATEGORIE = '31c'">lesy na území nár. parků a nár.přírodních rezervací</xsl:when>
      <xsl:when test="@KATEGORIE = '32a'">lesy v 1.zónách CHKO, lesy v přír. rezervacích a přírodních památkách</xsl:when>
      <xsl:when test="@KATEGORIE = '32b'">lázeňské lesy</xsl:when>
      <xsl:when test="@KATEGORIE = '32c'">příměstské a další lesy se zvýšenou funkcí rekreační</xsl:when>
      <xsl:when test="@KATEGORIE = '32d'">lesy sloužící lesnickému výzkumu a lesnické výuce</xsl:when>
      <xsl:when test="@KATEGORIE = '32e'">lesy se zvýšenou funkcí půdoochrannou, vodoochrannou, klimatickou nebo krajinotvornou</xsl:when>
      <xsl:when test="@KATEGORIE = '32f'">lesy pro zachování biologické různorodosti</xsl:when>
      <xsl:when test="@KATEGORIE = '32g'">lesy v uznaných oborách a samostatných bažantnicích</xsl:when>
      <xsl:when test="@KATEGORIE = '32h'">lesy v nichž jiný důležitý veřejný zájem vyžaduje odlišný způsob hospodaření</xsl:when>
   </xsl:choose>
   <br/>
</xsl:template>
<xsl:function name="fce:lesni_oblast">
   <xsl:param name="lo_kod"/>
   <xsl:choose>
      <xsl:when test="$lo_kod = '1'">Krušné hory</xsl:when>
      <xsl:when test="$lo_kod = '2'">Podkrušnohorské pánve</xsl:when>
      <xsl:when test="$lo_kod = '3'">Karlovarská vrchovina</xsl:when>
      <xsl:when test="$lo_kod = '4'">Doupovské hory</xsl:when>
      <xsl:when test="$lo_kod = '5'">České středohoří</xsl:when>
      <xsl:when test="$lo_kod = '6'">Západočeská pahorkatina</xsl:when>
      <xsl:when test="$lo_kod = '7'">Brdská vrchovina</xsl:when>
      <xsl:when test="$lo_kod = '8'">Křivoklátsko a Český kras</xsl:when>
      <xsl:when test="$lo_kod = '9'">Rakovnicko-kladenská pahorkatina</xsl:when>
      <xsl:when test="$lo_kod = '10'">Středočeská pahorkatina</xsl:when>
      <xsl:when test="$lo_kod = '11'">Český les</xsl:when>
      <xsl:when test="$lo_kod = '12'">Předhoří Šumavy a Novohradských hor</xsl:when>
      <xsl:when test="$lo_kod = '13'">Šumava</xsl:when>
      <xsl:when test="$lo_kod = '14'">Novohradské hory</xsl:when>
      <xsl:when test="$lo_kod = '15'">Jihočeské pánve</xsl:when>
      <xsl:when test="$lo_kod = '16'">Českomoravská vrchovina</xsl:when>
      <xsl:when test="$lo_kod = '17'">Polabí</xsl:when>
      <xsl:when test="$lo_kod = '18'">Severočeská pískovcová plošina a Český ráj</xsl:when>
      <xsl:when test="$lo_kod = '19'">Lužická pískovcová vrchovina</xsl:when>
      <xsl:when test="$lo_kod = '20'">Lužická pahorkatina</xsl:when>
      <xsl:when test="$lo_kod = '21'">Jizerské hory a Ještěd</xsl:when>
      <xsl:when test="$lo_kod = '22'">Krkonoše</xsl:when>
      <xsl:when test="$lo_kod = '23'">Podkrkonoší</xsl:when>
      <xsl:when test="$lo_kod = '24'">Sudetské mezihoří</xsl:when>
      <xsl:when test="$lo_kod = '25'">Orlické hory</xsl:when>
      <xsl:when test="$lo_kod = '26'">Předhoří Orlických hor</xsl:when>
      <xsl:when test="$lo_kod = '27'">Hrubý Jeseník</xsl:when>
      <xsl:when test="$lo_kod = '28'">Předhoří Hrubého Jeseníku</xsl:when>
      <xsl:when test="$lo_kod = '29'">Nízký Jeseník</xsl:when>
      <xsl:when test="$lo_kod = '30'">Drahanská vrchovina</xsl:when>
      <xsl:when test="$lo_kod = '31'">Českomoravské mezihoří</xsl:when>
      <xsl:when test="$lo_kod = '32'">Slezská nížina</xsl:when>
      <xsl:when test="$lo_kod = '33'">Předhoří Českomoravské vrchoviny</xsl:when>
      <xsl:when test="$lo_kod = '34'">Hornomoravský úval</xsl:when>
      <xsl:when test="$lo_kod = '35'">Jihomoravské úvaly</xsl:when>
      <xsl:when test="$lo_kod = '36'">Středomoravské Karpaty</xsl:when>
      <xsl:when test="$lo_kod = '37'">Kelečská pahorkatina</xsl:when>
      <xsl:when test="$lo_kod = '38'">Bílé Karpaty a Vizovické vrchy</xsl:when>
      <xsl:when test="$lo_kod = '39'">Podbeskydská pahorkatina</xsl:when>
      <xsl:when test="$lo_kod = '40'">Moravskoslezské Beskydy</xsl:when>
      <xsl:when test="$lo_kod = '41'">Hostýnskovsetínské vrchy a Javorníky</xsl:when>
   </xsl:choose>
</xsl:function>
</xsl:stylesheet>
